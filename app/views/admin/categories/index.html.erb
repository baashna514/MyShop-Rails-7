<!DOCTYPE html>
<html lang="en">
<body class="app">

<%= render 'admin/header' %>

<div class="app-wrapper">
  <div class="app-content pt-3 p-md-3 p-lg-4">
    <div class="container-xl">
      <h1 class="app-page-title">Categories</h1>
      <hr class="mb-4">
      <div class="row g-4 mb-4">
        <% flash.each do |type, message| %>
          <div class="alert <%= flash_class(type) %>">
            <%= message %>
          </div>
        <% end %>
      </div>

      <div class="row mb-4">
        <div class="col-auto">
          <div class="page-utilities">
            <div class="row g-2">
              <div class="col-auto">
                <a href="<%= new_admin_category_path %>" class="btn btn-success">Add Category</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="orders-table-tab-content">
        <div class="row">
          <div class="col-12 col-md-12">
            <div class="app-card app-card-orders-table shadow-sm mb-5">
              <div class="app-card-body">
                <div class="table-responsive">
                  <table class="table app-table-hover mb-0 text-left">
                    <thead>
                    <tr>
                      <th class="cell">SR#</th>
                      <th class="cell">Image</th>
                      <th class="cell">Title</th>
                      <th class="cell">Parent</th>
                      <th class="cell">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <% @categories.each_with_index do |category, index| %>
                      <tr>
                        <td class="cell"><%= index + 1 %></td>
                        <td class="cell">
                          <%= image_tag category.image,  style:'width:70px;height:70px;' if category.image.attached? %>
                        </td>
                        <td class="cell"><%= category.title %></td>
                        <td class="cell">
                          <% if category.has_parent? %>
                            <%= category.parent.title %>
                          <% else %>

                          <% end %>
                        </td>
                        <td class="cell">
                          <%= link_to raw('<i class="fa fa-edit" style="margin-top:8px;"></i>'), edit_admin_category_path(category), method: :get, class: 'btn btn-sm btn-primary mt-4', title: 'Edit Product', style: 'width:40px;'%>
                          <%= link_to raw('<i class="fa fa-trash" style="margin-top:8px;"></i>'), delete_category_admin_category_path(category), method: :delete, data: { confirm: 'Are you sure you want to delete this category?' }, class: 'btn btn-sm btn-danger mt-4', title: 'Remove Product', style: 'width:40px;'%>
                        </td>
                      </tr>
                    <% end %>
                    </tbody>
                  </table>
                </div>

              </div>
            </div>
            <nav class="app-pagination">
              <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                  <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                  <a class="page-link" href="#">Next</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>

